ğŸ§  Rendering & Z-Index System
Flat Render List (not tree-structured)

Sorted by: tree depth â†’ z-index.

Children rendered correctly regardless of parent due to absolute z-ordering.

Render Index Optimization

Each component stores a renderIndex for quick lookup.

On rerender, only components after the changed index in the list are rerendered.

Helps when rerendering only affects tail end of depth list (e.g. element 45 of 50).

Layer Repainting

Whole layer can be marked dirty and rerendered to ensure proper visual stacking.

Ensures that updated children donâ€™t render under older visuals.

ğŸ§± Component Design & Folder Structure
ComponentCore Folder

Split into:

Subclasses/ â†’ true inheritance (Button, Input, etc.).

Mixins/ â†’ composition (Hoverable, Renderable, etc.).

Component Class Bloat Mitigation

Renderer-related logic (like renderIndex) offloaded into a Renderable mixin.

Like the style objectâ€”isolated logic avoids stuffing Component.

ğŸ§¼ Memory Management
Emphasis on manual init() and deinit() to prevent memory leaks.

When component is removed, clean up:

Itself

Its mixins

Any recursive children

ğŸ­ Factory & Recycling System
âœ… Abstract Factory (with Entity Recycling):
java
Copy
Edit
public abstract class AbstractFactory {
    protected final Queue<FactoryObject> recycledEntities;

    public AbstractFactory() {
        recycledEntities = new ArrayDeque<>();
    }

    public FactoryObject GetEntity(FactoryParameter<?> param) {
        FactoryObject newEntity = recycledEntities.poll();
        if (newEntity == null) {
            newEntity = CreateNew(param);
        }
        newEntity.Initialize();
        return newEntity;
    }

    public void RecycleEntity(FactoryObject deadEntity) {
        recycledEntities.add(deadEntity);
        deadEntity.Deinitialize();
    }

    protected abstract FactoryObject CreateNew(FactoryParameter<?> param);
}
âœ… Example Concrete Factory:
java
Copy
Edit
public class CrocodileFactory extends AbstractFactory {
    @Override
    protected Crocodile CreateNew(FactoryParameter<?> param) {
        return new Crocodile();
    }
}
Entities are pooled for reuse (recycledEntities).

Reduces GC overhead by reinitializing rather than instantiating every time.

ğŸ§© Additional Notes
State Manager: Uses dirty flags to avoid rerendering unchanged components.

"Z-index" becomes actual position in flat listâ€”no need for per-parent sorting.

Flat list is just a smart ArrayList<Component> (custom wrapper for indexing, dirty tracking, etc.).